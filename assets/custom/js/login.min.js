let loginURL=BASE_URL+BASH_CODE;if("dashboard"!=redirect){let e=new Date;e.setTime(e.getTime()+6e4);let r="; expires="+e.toUTCString();document.cookie="redirect_page="+redirect+r+"; path=/"}else readCookie("redirect_page")&&(redirect=readCookie("redirect_page"));$("#loginform").on("submit",function(e){if(!e.isDefaultPrevented())return form=$("#loginform"),$.ajax({url:loginURL,type:"POST",dataType:"json",data:form.serialize(),beforeSend:function(){customLoading("show")},success:function(e){1==e.status?($("#errorMsg").addClass("hide"),window.location.href=BASE_URL+redirect,customLoading("hide")):(customLoading("hide"),$("#errorMsg").removeClass("hide"),$("#errorMsg").html(e.description),form[0].reset(),$("#inputIdentity").trigger("focus"))},error:function(e,r){503===e.status?errorMsg="Sorry too many reqeust":404==e.status?(errorMsg="Requested page not found. [404]",location.reload()):500==e.status?(errorMsg="Internal Server Error [500].",location.reload()):"parsererror"===r?(errorMsg="Requested JSON parse failed.",location.reload()):errorMsg="timeout"===r?"Time out error.":"abort"===r?"Ajax request aborted.":"Failed to login",customLoading("hide"),$("#errorMsg").removeClass("hide"),$("#errorMsg").html(errorMsg),form[0].reset(),$("#inputIdentity").trigger("focus")}}),!1;e.preventDefault()});